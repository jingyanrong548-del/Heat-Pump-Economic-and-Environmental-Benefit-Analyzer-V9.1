body {
    font-family: 'Inter', 'Noto Sans SC', sans-serif;
}
.input-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
}
.result-card {
    transition: all 0.3s ease-in-out;
    transform: translateY(20px);
    opacity: 0;
}
.result-card.visible {
    transform: translateY(0);
    opacity: 1;
}
.default-param {
    background-color: #f0fff4; /* A light green color */
    border-color: #9ae6b4;
}
.tooltip-container {
    position: relative;
}
.tooltip-text {
    visibility: hidden;
    width: 280px;
    background-color: #555;
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 8px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -140px;
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 12px;
}
.tooltip-text::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
}
.tooltip-container:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}
/* --- 修复开始 --- */
#calculation-details {
    transition: all 0.5s ease-in-out;
    max-height: 0;
    overflow: hidden;
    /* 默认隐藏状态下，移除内边距和外边距 */
    padding: 0;
    margin-top: 0;
}
/* 新增：为风险分析面板添加相同样式 */
#risk-analysis-details {
    transition: all 0.5s ease-in-out;
    max-height: 0;
    overflow: hidden;
    padding: 0;
    margin-top: 0;
}

#calculation-details.visible {
    max-height: 8000px; /* 增加最大高度以容纳新内容 */
    margin-top: 1.5rem;
     /* 展开时，恢复内边距 (替代原先的 p-4) */
    padding: 1rem;
}
/* 新增：风险分析面板的展开样式 */
#risk-analysis-details.visible {
    max-height: 8000px; /* 增加最大高度以容纳新内容 */
    margin-top: 1rem;
    padding: 1rem;
}
/* --- 修复结束 --- */

input:disabled, select:disabled {
    background-color: #f3f4f6;
    cursor: not-allowed;
    /* 修正：确保禁用的输入框文本也是灰色的 */
    color: #9ca3af;
}
/* 修正：未选中对比项的父容器样式 */
.comparison-disabled {
    opacity: 0.6;
    transition: opacity 0.3s ease;
}
.hidden {
    display: none;
}
.info-icon {
    cursor: help;
    color: #6b7280; /* gray-500 */
}
.info-icon:hover {
    color: #3b82f6; /* blue-500 */
}
/* Style for stale results */
#results-container.stale {
     opacity: 0.75;
     filter: blur(1px);
     transition: opacity 0.3s, filter 0.3s;
}
/* 储能模式下的高亮 (V6.3 通用电价模式) */
.storage-mode-field {
    background-color: #eff6ff; /* blue-50 */
    border-color: #93c5fd; /* blue-300 */
}
/* 新增：为公式和代码块添加样式 */
.formula-block {
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    padding: 12px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 13px;
    color: #333;
    overflow-x: auto;
    white-space: pre;
    margin-top: 4px;
    margin-bottom: 8px;
}
.details-section h6 {
    font-size: 1.05em; /* 略大于正文 */
    font-weight: 600; /* semi-bold */
    color: #1f2937; /* gray-800 */
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}
/* 新增：为风险分析的H3和H4添加样式 */
.details-section h3 {
    font-size: 1.25em; /* 1.25rem */
    font-weight: 700; /* bold */
    color: #111827; /* gray-900 */
    margin-top: 1.25rem;
    margin-bottom: 0.75rem;
    border-bottom: 1px solid #d1d5db; /* gray-300 */
    padding-bottom: 0.5rem;
}
.details-section h4 {
    font-size: 1.1em; /* 略大于h6 */
    font-weight: 600; /* semi-bold */
    color: #1f2937; /* gray-800 */
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}
.details-section p {
    margin-bottom: 0.5rem;
    line-height: 1.6;
}
/* 新增：为风险分析的列表添加样式 */
.details-section ul {
    list-style-type: disc;
    list-style-position: inside;
    margin-left: 1rem;
    margin-bottom: 0.75rem;
}
.details-section ul li {
    line-height: 1.6;
    margin-bottom: 0.25rem;
}
.details-section .authority {
    font-style: italic;
    color: #4b5563; /* gray-600 */
    font-size: 0.9em;
    border-left: 3px solid #60a5fa; /* blue-400 */
    padding-left: 10px;
    margin-bottom: 0.75rem;
}


/* **** 新增：用于在屏幕上隐藏打印容器 **** */
.print-only {
    display: none;
}

/* **** 替换：全新的打印样式 (A4报告) **** */
@media print {
    /* 1. 隐藏网页应用本身 */
    body > *:not(.print-only) {
        display: none !important;
    }
    
    /* 2. 仅显示打印容器 */
    body {
        background: #fff !important;
        margin: 0;
        padding: 0;
        -webkit-print-color-adjust: exact; /* 确保背景色打印 */
        color-adjust: exact;
    }
    .print-only {
        display: block !important;
        padding: 2cm 2cm 1.5cm 2cm; /* A4页边距 (底部留出页脚空间) */
        font-family: 'Inter', 'Noto Sans SC', sans-serif;
        color: #000;
    }

    /* 3. 打印报告的排版 */
    .print-report-header {
        text-align: center;
        border-bottom: 2px solid #000;
        padding-bottom: 10px;
        margin-bottom: 20px;
    }
    .print-report-header h1 {
        font-size: 16pt;
        margin: 0;
        color: #000;
    }
    .print-report-header h2 {
        font-size: 14pt;
        font-weight: normal;
        margin: 5px 0;
        color: #000;
    }
    .print-report-header p {
        font-size: 10pt;
        color: #333;
        margin: 0;
    }
    .print-report-section h3 {
        font-size: 13pt;
        font-weight: bold;
        color: #000;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
        margin-top: 25px;
        margin-bottom: 10px;
        page-break-after: avoid;
    }
    
    /* 4. 打印表格的样式 (简洁) */
    .print-report-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 9pt; /* 压缩字体以容纳更多内容 */
        page-break-inside: avoid; /* 避免表格跨页 */
    }
    .print-report-table th, 
    .print-report-table td {
        border: 1px solid #000;
        padding: 6px 8px;
        text-align: left;
        color: #000;
    }
    .print-report-table th {
        background-color: #f0f0f0 !important; /* 强制打印背景色 */
        font-weight: bold;
    }
    .print-report-table .align-right {
        text-align: right;
    }
    .print-report-table .col-param {
        width: 30%;
        font-weight: 500;
        background-color: #f9f9f9 !important; /* 强制打印背景色 */
    }

    /* 5. 页脚 */
    .print-report-footer {
        position: fixed; /* 固定在页面底部 */
        bottom: 0.5cm; /* 调整页脚位置 */
        left: 2cm;
        right: 2cm;
        text-align: center;
        font-size: 8pt;
        color: #666;
        border-top: 1px solid #ccc;
        padding-top: 5px;
    }
}

/* --- V11.0 新增：全局通知栏样式 (替代 alert) --- */
#global-notifier {
    /* 默认是 'info' 样式 */
    background-color: #eff6ff; /* Tailwind blue-50 */
    color: #1e40af; /* Tailwind blue-800 */
    border: 1px solid #bfdbfe; /* Tailwind blue-200 */
    transition: opacity 0.3s, transform 0.3s;
    transform: translateX(100%);
    opacity: 0;
}
#global-notifier:not(.hidden) {
    transform: translateX(0);
    opacity: 1;
}
#global-notifier.notifier-success {
    background-color: #ecfdf5; /* Tailwind green-50 */
    color: #065f46; /* Tailwind green-800 */
    border: 1px solid #a7f3d0; /* Tailwind green-200 */
}
#global-notifier.notifier-error {
    background-color: #fef2f2; /* Tailwind red-50 */
    color: #991b1b; /* Tailwind red-800 */
    border: 1px solid #fecaca; /* Tailwind red-200 */
}
/* (确认模态框 #confirm-modal 完全由 index.html 中的 Tailwind 类定义，无需额外 CSS) */

